---
alwaysApply: false
description: Cloudflare solver usage and scraping guidance for protected/dynamic sites
---

# Cloudflare & Scraping Guidance

Defaults & flags
- CF solver is ON by default. Use `--no-cf` to disable.
- CF endpoint defaults to `http://localhost:8191/v1`; override with `--cf_url`.
- Run FlareSolverr locally if needed:
  - `docker run -d --name flaresolverr -p 8191:8191 ghcr.io/flaresolverr/flaresolverr:latest`

Per-site behavior
- Mark sites that require CF with `requires_cloudflare = true` in [src/config.rs](mdc:src/config.rs).
- `gog-games.to` is solver-blacklisted: even when CF is globally enabled, plain HTTP is used with an AJAX fallback (JSON/HTML fragment). Optionally pass browser cookies via `--cookie "cf_clearance=...; ..."` for better results.

Selectors & fallbacks
- Prefer site-specific selectors for titles/links (see [src/config.rs](mdc:src/config.rs)).
- Parser fallback scans all `a[href]` and matches the query in text or href slug.
- If anchor text is empty, titles are derived from the last URL segment (slug) in [src/parser.rs](mdc:src/parser.rs).
- Site-specific filters (e.g., FitGirl) drop pagination/comments/teasers/dates.

Listing/FrontPage modes
- For sites without search, use `SearchKind::{FrontPage, ListingPage}` and filter locally.
- Examples: `elamigos.site` (FrontPage), `ankergames.net` (PathEncoded or ListingPage depending on config).

Cookies & headers
- You may forward your browser session: `--cookie "key=value; other=value2"`.
- Cookies are forwarded to both normal fetches and FlareSolverr. Some sites may also require XSRF headers; the tool injects common XSRF header names from the cookie when possible for AJAX fallbacks.

Debug & troubleshooting
- Use `--debug` to print per-site URL and sizes. On zero results, HTML/JSON samples are saved to [debug/](mdc:debug/) for selector tuning.
- If CF returns empty for a site, try `--no-cf` or provide cookies.

Interactive & output
- Running without a query launches interactive mode: prompts for search phrase and site selection. Output defaults to table.
- Use `--format table|json` to switch formatting.
